(function e$$0(z,v,d){function m(D,y){if(!v[D]){if(!z[D]){var E="function"==typeof require&&require;if(!y&&E)return E(D,!0);if(C)return C(D,!0);throw Error("Cannot find module '"+D+"'");}E=v[D]={exports:{}};z[D][0].call(E.exports,function(u){var a=z[D][1][u];return m(a?a:u)},E,E.exports,e$$0,z,v,d)}return v[D].exports}for(var C="function"==typeof require&&require,y=0;y<d.length;y++)m(d[y]);return m})({1:[function(b,z,v){function d(){}function m(e,n,t,A,K){function w(c){if(!c)return A(null,"Couldn't access BAM");
c=a(c,c.byteLength);c=new Uint8Array(c);var h=y(c,0);if(h!=f)return A(null,"Not a BAM file, magic=0x"+h.toString(16));for(var l=y(c,4),q="",h=0;h<l;++h)q+=String.fromCharCode(c[h+8]);q=y(c,l+8);l+=12;b.chrToIndex={};b.indexToChr=[];for(h=0;h<q;++h){for(var k=y(c,l),g="",r=0;r<k-1;++r)g+=String.fromCharCode(c[l+4+r]);y(c,l+k+4);b.chrToIndex[g]=h;0==g.indexOf("chr")?b.chrToIndex[g.substring(3)]=h:b.chrToIndex["chr"+g]=h;b.indexToChr.push(g);l=l+8+k}if(b.indices)return A(b)}var b=new d;b.data=e;b.bai=
n;b.indexChunks=t;var s=b.indexChunks?b.indexChunks.minBlockIndex:1E9;if(b.indexChunks){n=b.indexChunks.chunks;b.indices=[];for(var g=0;g<n.length;g++)b.indices[g]=null;b.data.slice(0,s).fetch(w)}else b.bai.fetch(function(c){var h,l,q;if(c){var k=new Uint8Array(c),g=y(k,0);if(g!=p)c=A(null,"Not a BAI file, magic=0x"+g.toString(16));else{g=y(k,4);b.indices=[];for(var r=8,B=0;B<g;++B){var O=r;h=k;var F=q=O;l=y(h,F);for(var F=F+4,P=0;P<l;++P){y(h,F);var Q=y(h,F+4),F=F+(8+16*Q)}for(var P=y(h,F),F=F+4,
Q=1E9,x=F,a=0;a<P;++a){var n=u(h,x),x=x+8;if(n){h=n.block;0<n.offset&&(h+=65536);h<Q&&(Q=h);break}}F+=8*P;h=Q;q=F-q;r+=q;s=Math.min(h,s);0<l&&(b.indices[B]=new Uint8Array(c,O,r-O))}c=!0}}else c="Couldn't access BAI";!0!==c?b.bai.url&&"undefined"===typeof K?(b.bai.url=b.data.url.replace(/.bam$/,".bai"),m(e,b.bai,t,A,!0)):A(null,c):b.data.slice(0,s).fetch(w,{timeout:5E3})},{timeout:5E3})}function C(){}if("undefined"!==typeof b){b("./spans");v=b("./bin");var y=v.readInt,D=v.readShort,H=v.readByte,E=
v.readFloat;b=b("./lh3utils");var u=b.readVob,a=b.unbgzf,n=b.reg2bins,e=b.Chunk}var f=21840194,p=21578050;b={MULTIPLE_SEGMENTS:1,ALL_SEGMENTS_ALIGN:2,SEGMENT_UNMAPPED:4,NEXT_SEGMENT_UNMAPPED:8,REVERSE_COMPLEMENT:16,NEXT_REVERSE_COMPLEMENT:32,FIRST_SEGMENT:64,LAST_SEGMENT:128,SECONDARY_ALIGNMENT:256,QC_FAIL:512,DUPLICATE:1024,SUPPLEMENTARY:2048};d.prototype.blocksForRange=function(a,f,p){var t=this.indices[a];if(!t)return[];a=n(f,p);for(var d=[],w=0;w<a.length;++w)d[a[w]]=!0;a=[];for(var b=[],w=y(t,
0),s=4,g=0;g<w;++g){var c=y(t,s),h=y(t,s+4),s=s+8;if(d[c])for(var l=0;l<h;++l){var q=u(t,s),k=u(t,s+8);(4681>c?b:a).push(new e(q,k));s+=16}else s+=16*h}w=y(t,s);d=null;f=Math.min(f>>14,w-1);p=Math.min(p>>14,w-1);for(w=f;w<=p;++w)(f=u(t,s+4+8*w))&&(!d||f.block<d.block||f.offset<d.offset)&&(d=f);t=[];if(null!=d)for(w=0;w<b.length;++w)p=b[w],p.maxv.block>=d.block&&p.maxv.offset>=d.offset&&t.push(p);b=t;t=[];for(w=0;w<b.length;++w)t.push(b[w]);for(w=0;w<a.length;++w)t.push(a[w]);t.sort(function(c,h){var l=
c.minv.block-h.minv.block;return 0!=l?l:c.minv.offset-h.minv.offset});a=[];if(0<t.length){b=t[0];for(w=1;w<t.length;++w)p=t[w],p.minv.block==b.maxv.block?b=new e(b.minv,p.maxv):(a.push(b),b=p);a.push(b)}return a};d.prototype.fetch=function(e,t,p,f,n){function u(){if(l>=g.length)return f(h);if(q){var c=new Uint8Array(q),c=d.readBamRecords(c,g[l].minv.offset,h,t,p,s,n);q=null;++l;return c?f(h):u()}var J=g[l],c=J.minv.block;d.data.slice(c,J.maxv.block+65536-c).fetch(function(c){q=a(c,J.maxv.block-J.minv.block+
1);return u()})}var d=this;n=n||{};var s=this.chrToIndex[e],g;if(void 0===s)g=[];else{if(null===this.indices[s]&&this.indexChunks.chunks[s]){var c=this.indexChunks.chunks[s];return this.bai.slice(c[0],c[1]).fetch(function(c){c=new Uint8Array(c);this.indices[s]=c;return this.fetch(e,t,p,f,n)}.bind(this))}(g=this.blocksForRange(s,t,p))||f(null,"Error in index fetch")}var h=[],l=0,q;u()};var t="=ACxGxxxTxxxxxxN".split(""),G="MIDNSHP=X???????".split("");d.prototype.readBamRecords=function(e,a,f,p,n,u,
d){for(;;){var s=y(e,a),s=a+s+4;if(s>=e.length)return!1;var g=new C,c=y(e,a+4),h=y(e,a+8),l=y(e,a+12),q=(l&65280)>>8,k=l&255,l=y(e,a+16),J=(l&4294901760)>>16,r=l&65535,l=y(e,a+20),B=y(e,a+24),O=y(e,a+28);y(e,a+32);g.segment=this.indexToChr[c];g.flag=J;g.pos=h;g.mq=q;d.light&&(g.seqLength=l);if(!d.light){0<=B&&(g.nextSegment=this.indexToChr[B],g.nextPos=O);q="";for(h=0;h<k-1;++h)q+=String.fromCharCode(e[a+36+h]);g.readName=q;a=a+36+k;k="";for(h=0;h<r;++h)q=y(e,a),k=k+(q>>4)+G[q&15],a+=4;g.cigar=k;
r="";k=l+1>>1;for(h=0;h<k;++h)q=e[a+h],r+=t[(q&240)>>4],r.length<l&&(r+=t[q&15]);a+=k;g.seq=r;r="";for(h=0;h<l;++h)r+=String.fromCharCode(e[a+h]+33);a+=l;for(g.quals=r;a<s;){r=String.fromCharCode(e[a],e[a+1]);k=String.fromCharCode(e[a+2]);if("A"==k)k=String.fromCharCode(e[a+3]),a+=4;else if("i"==k||"I"==k)k=y(e,a+3),a+=7;else if("c"==k||"C"==k)k=e[a+3],a+=4;else if("s"==k||"S"==k)k=D(e,a+3),a+=5;else if("f"==k)k=E(e,a+3),a+=7;else if("Z"==k||"H"==k)for(a+=3,k="";h=e[a++],0!=h;)k+=String.fromCharCode(h);
else if("B"==k){k=String.fromCharCode(e[a+3]);h=y(e,a+4);if("i"==k||"I"==k||"f"==k)q=4,J="f"==k?E:y;else if("s"==k||"S"==k)q=2,J=D;else if("c"==k||"C"==k)q=1,J=H;else throw"Unknown array type "+k;a+=8;k=[];for(B=0;B<h;++B)k.push(J(e,a)),a+=q}else throw"Unknown type "+k;g[r]=k}}if(!p||g.pos<=n&&g.pos+l>=p)void 0!==u&&c!=u||f.push(g);if(g.pos>n)return!0;a=s}};"undefined"!==typeof z&&(z.exports={makeBam:m,BAM_MAGIC:f,BAI_MAGIC:p,BamFlags:b})},{"./bin":3,"./lh3utils":8,"./spans":10}],2:[function(b,z,
v){function d(g,c){return g[c]+g[c+1]*A+g[c+2]*K+g[c+3]*w+g[c+4]*N}function m(){}function C(g,c,h,l){this.bwg=g;this.cirTreeOffset=c;this.cirTreeLength=h;this.isSummary=l}function y(g,c,h){var l=new m;l.data=g;l.name=h;l.data.slice(0,512).salted().fetch(function(h){if(!h)return c(null,"Couldn't fetch file");var k=new Uint8Array(h),g=new Int16Array(h);h=new Int32Array(h);var r=k[0]+A*k[1]+K*k[2]+w*k[3];if(r==G)l.type="bigwig";else if(r==L)l.type="bigbed";else return r==I||r==M?c(null,"Currently don't support big-endian BBI files"):
c(null,"Not a supported format, magic=0x"+r.toString(16));l.version=g[2];l.numZoomLevels=g[3];l.chromTreeOffset=d(k,8);l.unzoomedDataOffset=d(k,16);l.unzoomedIndexOffset=d(k,24);l.fieldCount=g[16];l.definedFieldCount=g[17];l.asOffset=d(k,36);l.totalSummaryOffset=d(k,44);l.uncompressBufSize=h[13];l.extHeaderOffset=d(k,56);l.zoomLevels=[];for(g=0;g<l.numZoomLevels;++g){var r=h[6*g+16],a=d(k,24*g+72),e=d(k,24*g+80);l.zoomLevels.push({reduction:r,dataOffset:a,indexOffset:e})}l.readChromTree(function(){l.getAutoSQL(function(h){l.schema=
h;return c(l)})})},{timeout:5E3})}function D(g,c,h,l,q){this.bbi=g;this.type=c;this.fieldCount=h;this.offset=l;this.field=q}if("undefined"!==typeof b){v=b("./spans");var H=v.Range,E=v.union,u=v.intersection;v=b("./das");var a=v.DASFeature,n=v.DASGroup,e=b("./utils").shallowCopy,f=b("./bin").readInt;b=b("jszlib");var p=b.inflateBuffer,t=b.arrayCopy}var G=2291137574,I=654086024,L=2273964779,M=3958540679,A=256,K=65536,w=16777216,N=4294967296,s=/^[0-9]+,[0-9]+,[0-9]+/;m.prototype.readChromTree=function(g){var c=
this;this.chromsToIDs={};this.idsToChroms={};this.maxID=0;var h=this.unzoomedDataOffset,h=h+4-(h-this.chromTreeOffset&3);this.data.slice(this.chromTreeOffset,h-this.chromTreeOffset).fetch(function(h){var q=new Uint8Array(h),k=new Int16Array(h),a=(new Int32Array(h))[2];d(q,16);var r=function(h){var l=q[h],g=k[h/2+1];h+=4;for(var e=0;e<g;++e)if(0==l){h+=a;var s=d(q,h);h+=8;s-=c.chromTreeOffset;r(s)}else{for(var s="",x=0;x<a;++x){var t=q[h++];0!=t&&(s+=String.fromCharCode(t))}x=q[h+3]<<24|q[h+2]<<16|
q[h+1]<<8|q[h+0];h+=8;c.chromsToIDs[s]=x;0==s.indexOf("chr")&&(c.chromsToIDs[s.substr(3)]=x);c.idsToChroms[x]=s;c.maxID=Math.max(c.maxID,x)}};r(32);g(c)})};C.prototype.readWigData=function(g,c,h,l){g=this.bwg.chromsToIDs[g];if(void 0===g)return l([]);this.readWigDataById(g,c,h,l)};C.prototype.readWigDataById=function(g,c,h,l){var q=this;if(this.cirHeader){var k=[],a=0;Date.now();var r=function(l,q,k,r){return(0>g||l==g)&&q<=h&&k>=c},e=function(c,h){q.bwg.instrument&&console.log("level="+h+"; offset="+
c+"; time="+(Date.now()|0));a+=c.length;if(1==c.length&&48==c[0]-q.cirTreeOffset&&q.cachedCirRoot)F(q.cachedCirRoot,0,h),--a,0==a&&q.fetchFeatures(r,k,l);else{for(var g=4+32*q.cirBlockSize,e,B=0;B<c.length;++B){var t=new H(c[B],c[B]+g);e=e?E(e,t):t}g=e.ranges();for(e=0;e<g.length;++e)s(c,g[e],h)}},s=function(c,h,g,e){h.max();h.min();q.bwg.data.slice(h.min(),h.max()-h.min()).fetch(function(e){for(var B=0;B<c.length;++B)h.contains(c[B])&&(F(e,c[B]-h.min(),g),48==c[B]-q.cirTreeOffset&&0==c[B]-h.min()&&
(q.cachedCirRoot=e),--a,0==a&&q.fetchFeatures(r,k,l))})},F=function(l,q,r){var a=new Uint8Array(l),s=new Int16Array(l);l=new Int32Array(l);var J=a[q],s=s[q/2+1];q+=4;if(0!=J)for(J=0;J<s;++J){var F=q/4,t=l[F],p=l[F+1],f=l[F+2],F=l[F+3],n=d(a,q+16);r=d(a,q+24);(0>g||t<g||t==g&&p<=h)&&(0>g||f>g||f==g&&F>=c)&&k.push({offset:n,size:r});q+=32}else{for(var O=[],J=0;J<s;++J)F=q/4,t=l[F],p=l[F+1],f=l[F+2],F=l[F+3],n=d(a,q+16),(0>g||t<g||t==g&&p<=h)&&(0>g||f>g||f==g&&F>=c)&&O.push(n),q+=24;0<O.length&&e(O,
r+1)}};e([q.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(k){q.cirHeader=k;k=new Int32Array(q.cirHeader);q.cirBlockSize=k[1];q.readWigDataById(g,c,h,l)})};C.prototype.fetchFeatures=function(g,c,h){var l=this;c.sort(function(c,h){return(c.offset|0)-(h.offset|0)});if(0==c.length)h([]);else{var q=[],k=function(c,h,g,k){k||(k={});var e=new a;e._chromId=c;e.segment=l.bwg.idsToChroms[c];e.min=h;e.max=g;e.type="bigwig";for(var s in k)e[s]=k[s];q.push(e)},e=function(){if(0==
c.length)Date.now(),h(q);else{var a=c[0];if(a.data)l.parseFeatures(a.data,k,g),c.splice(0,1),e();else{for(var s=a.offset,f=a.size,a=1;a<c.length&&c[a].offset==s+f;)f+=c[a].size,++a;l.bwg.data.slice(s,f).fetch(function(h){for(var q=0,g=0;q<f;){var k=c[g],a;0<l.bwg.uncompressBufSize?a=p(h,q+2,k.size-2):(a=new Uint8Array(k.size),t(new Uint8Array(h,q,k.size),0,a,0,k.size),a=a.buffer);k.data=a;q+=k.size;++g}e()})}}};e()}};C.prototype.parseFeatures=function(g,c,h){var l=new Uint8Array(g);if(this.isSummary)for(var q=
new Int16Array(g),k=new Int32Array(g),a=new Float32Array(g),l=g.byteLength/32,q=0;q<l;++q){g=k[8*q];var r=k[8*q+1],B=k[8*q+2],t=k[8*q+3],F=a[8*q+5],f=a[8*q+6];h(g,r+1,B)&&(t={type:"bigwig",score:f/t,maxScore:F},"bigbed"==this.bwg.type&&(t.type="density"),c(g,r+1,B,t))}else if("bigwig"==this.bwg.type)if(q=new Int16Array(g),k=new Int32Array(g),a=new Float32Array(g),g=k[0],F=k[1],f=k[3],t=k[4],r=l[20],l=q[11],3==r)for(q=0;q<l;++q){var p=a[q+6],k=F+q*f+1,r=F+q*f+t;h(g,k,r)&&c(g,k,r,{score:p})}else if(2==
r)for(q=0;q<l;++q)r=k[2*q+6]+1,B=r+t-1,p=a[2*q+7],h(g,r,B)&&c(g,r,B,{score:p});else if(1==r)for(q=0;q<l;++q)r=k[3*q+6]+1,B=k[3*q+7],p=a[3*q+8],r>B&&(r=B),h(g,r,B)&&c(g,r,B,{score:p});else console.log("Currently not handling bwgType="+r);else if("bigbed"==this.bwg.type)for(q=0,t=this.bwg.definedFieldCount,F=this.bwg.schema;q<l.length;){g=l[q+3]<<24|l[q+2]<<16|l[q+1]<<8|l[q+0];r=l[q+7]<<24|l[q+6]<<16|l[q+5]<<8|l[q+4];B=l[q+11]<<24|l[q+10]<<16|l[q+9]<<8|l[q+8];q+=12;for(p="";;)if(f=l[q++],0!=f)p+=String.fromCharCode(f);
else break;var f={},x;x=0<p.length?p.split("\t"):[];0<x.length&&3<t&&(f.label=x[0]);1<x.length&&4<t&&(p=parseInt(x[1]),isNaN(p)||(f.score=p));2<x.length&&5<t&&(f.orientation=x[2]);5<x.length&&8<t&&(p=x[5],s.test(p)&&(f.itemRgb="rgb("+p+")"));if(x.length>t-3&&F)for(p=t-3;p<x.length;++p)f[F.fields[p+3].name]=x[p];if(h(g,r+1,B,x))if(12>t)c(g,r+1,B,f);else{var p=x[3]|0,d=x[4]|0,b=x[6]|0,A=x[7].split(","),w=x[8].split(",");f.exonFrames&&(a=f.exonFrames.split(","),f.exonFrames=void 0);f.type="transcript";
var G=new n;for(k in f)G[k]=f[k];G.id=x[0];G.segment=this.bwg.idsToChroms[g];G.min=r+1;G.max=B;G.notes=[];f.groups=[G];if(9<x.length){var m=B=f.geneName||x[9];10<x.length&&(m=x[10]);f.geneName2&&(m=f.geneName2);x=e(G);x.id=B;x.label=m;x.type="gene";f.groups.push(x)}B=[];for(x=0;x<b;++x)G=(w[x]|0)+r,G=new H(G,G+(A[x]|0)),B.push(G);A=E(B);b=A.ranges();for(r=0;r<b.length;++r)B=b[r],c(g,B.min()+1,B.max(),f);if(d>p&&(r="+"==f.orientation?new H(p,d+3):new H(p-3,d),r=u(A,r))){f.type="translation";p=r.ranges();
for(A=d=0;p[0].min()>b[A].max();)A++;for(r=0;r<p.length;++r)b=r,"-"==f.orientation&&(b=p.length-r-1),B=p[b],f.readframe=d,a&&(b=parseInt(a[b+A]),"number"===typeof b&&0<=b&&2>=b&&(f.readframe=b,f.readframeExplicit=!0)),b=B.max()-B.min(),d=(d+b)%3,c(g,B.min()+1,B.max(),f)}}}else throw Error("Don't know what to do with "+this.bwg.type);};C.prototype.getFirstAdjacent=function(g,c,h,l){g=this.bwg.chromsToIDs[g];if(void 0===g)return l([]);this.getFirstAdjacentById(g,c,h,l)};C.prototype.getFirstAdjacentById=
function(g,c,h,l){var q=this;if(this.cirHeader){var k=null,a=-1,e=-1,s=0;Date.now();var f=function(c,h){s+=c.length;for(var l=4+32*q.cirBlockSize,k,a=0;a<c.length;++a){var g=new H(c[a],c[a]+l);k=k?E(k,g):g}l=k.ranges();for(k=0;k<l.length;++k)p(c,l[k],h)},p=function(a,e,r,f){e.max();e.min();q.bwg.data.slice(e.min(),e.max()-e.min()).fetch(function(f){for(var p=0;p<a.length;++p)if(e.contains(a[p])&&(t(f,a[p]-e.min(),r),--s,0==s)){if(!k)return 0<h&&(0!=g||0<c)?q.getFirstAdjacentById(0,0,h,l):0>h&&(g!=
q.bwg.maxID||1E9>c)?q.getFirstAdjacentById(q.bwg.maxID,1E9,h,l):l([]);q.fetchFeatures(function(l,q,k,a){return 0>h&&(l<g||k<c)||0<h&&(l>g||q>c)},[k],function(c){for(var q=null,k=-1,a=-1,g=0;g<c.length;++g){var e=c[g],r=e._chromId,s=e.min,f=e.max;if(null==q||0>h&&(r>k||f>a)||0<h&&(r<k||s<a))q=e,a=0>h?f:s,k=r}return null!=q?l([q]):l([])})}})},t=function(l,s,p){var B=new Uint8Array(l),t=new Int16Array(l);l=new Int32Array(l);var F=B[s],t=t[s/2+1];s+=4;if(0!=F)for(F=0;F<t;++F){var n=s/4,u=l[n],b=l[n+1],
A=l[n+2],w=l[n+3],n=d(B,s+16);p=d(B,s+24);(0>h&&(u<g||u==g&&b<=c)||0<h&&(A>g||A==g&&w>=c))&&!/_random/.exec(q.bwg.idsToChroms[u])&&(null==k||0>h&&(A>a||A==a&&w>e)||0<h&&(u<a||u==a&&b<e))&&(k={offset:n,size:p},e=0>h?w:b,a=0>h?A:u);s+=32}else{for(var G=B=-1,F=0;F<t;++F){n=s/4;u=l[n];b=l[n+1];A=l[n+2];w=l[n+3];n=l[n+4]<<32|l[n+5];if(0>h&&(u<g||u==g&&b<=c)&&A>=g||0<h&&(A>g||A==g&&w>=c)&&u<=g)if(0>B||w>G)B=n,G=0>h?w:b;s+=24}0<=B&&f([B],p+1)}};f([q.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,
48).fetch(function(k){q.cirHeader=k;k=new Int32Array(q.cirHeader);q.cirBlockSize=k[1];q.getFirstAdjacentById(g,c,h,l)})};m.prototype.readWigData=function(a,c,h,l){this.getUnzoomedView().readWigData(a,c,h,l)};m.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var a=4E3;this.zoomLevels[0]&&(a=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset);this.unzoomedView=new C(this,this.unzoomedIndexOffset,a,!1)}return this.unzoomedView};m.prototype.getZoomedView=function(a){a=this.zoomLevels[a];
a.view||(a.view=new C(this,a.indexOffset,4E3,!0));return a.view};m.prototype._tsFetch=function(a,c,h,l,q){var k=this;if(a>=this.zoomLevels.length-1){if(this.topLevelReductionCache){for(var e=[],s=this.topLevelReductionCache,f=0;f<s.length;++f)s[f]._chromId==c&&e.push(s[f]);return q(e)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3E8,function(e){k.topLevelReductionCache=e;return k._tsFetch(a,c,h,l,q)})}else return(0>a?this.getUnzoomedView():this.getZoomedView(a)).readWigDataById(c,
h,l,q)};m.prototype.thresholdSearch=function(a,c,h,l,q){function k(){if(0==s.length)return q(null);s.sort(function(c,l){var q=c.zoom-l.zoom;if(0!=q)return q;q=c.chrOrd-l.chrOrd;return 0!=q?q:c.min-l.min*h});var a=s.splice(0,1)[0];e._tsFetch(a.zoom,a.chr,a.min,a.max,function(e){var g=0<h?0:3E8;a.fromRef&&(g=c);for(var f=0;f<e.length;++f){var p=e[f],t;t=void 0!=p.maxScore?p.maxScore:p.score;if(0<h){if(t>l)if(0>a.zoom){if(p.min>g)return q(p)}else p.max>g&&s.push({chr:a.chr,chrOrd:a.chrOrd,zoom:a.zoom-
2,min:p.min,max:p.max,fromRef:a.fromRef})}else if(t>l)if(0>a.zoom){if(p.max<g)return q(p)}else p.min<g&&s.push({chr:a.chr,chrOrd:a.chrOrd,zoom:a.zoom-2,min:p.min,max:p.max,fromRef:a.fromRef})}k()})}h=0>h?-1:1;var e=this;a=this.chromsToIDs[a];for(var s=[{chrOrd:0,chr:a,zoom:e.zoomLevels.length-4,min:0,max:3E8,fromRef:!0}],f=1;f<=this.maxID+1;++f){var p=(a+h*f)%(this.maxID+1);0>p&&(p+=this.maxID+1);s.push({chrOrd:f,chr:p,zoom:e.zoomLevels.length-1,min:0,max:3E8})}k()};m.prototype.getAutoSQL=function(a){if(!this.asOffset)return a(null);
this.data.slice(this.asOffset,2048).fetch(function(c){var h=new Uint8Array(c);c="";for(var l=0;l<h.length&&0!=h[l];++l)c+=String.fromCharCode(h[l]);var h=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,q=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(c);if(q){l={declType:q[1],name:q[2],comment:q[4],fields:[]};c=c.substring(q[0]);for(q=h.exec(c);null!=q;q=h.exec(c))l.fields.push({type:q[1],name:q[2],comment:q[4]});return a(l)}})};m.prototype.getExtraIndices=function(a){var c=this;if(4>this.version||0==this.extHeaderOffset||
"bigbed"!=this.type)return a(null);this.data.slice(this.extHeaderOffset,64).fetch(function(h){if(!h)return a(null,"Couldn't fetch extension header");var l=new Uint8Array(h),q=new Int16Array(h);new Int32Array(h);var k=q[1];h=d(l,4);if(0==k)return a(null);c.data.slice(h,20*k).fetch(function(h){if(!h)return a(null,"Couldn't fetch index info");var l=new Uint8Array(h),q=new Int16Array(h);new Int32Array(h);h=[];for(var e=0;e<k;++e){var s=q[10*e],f=q[10*e+1],p=d(l,20*e+4),s=new D(c,s,f,p,q[10*e+8]);h.push(s)}a(h)})})};
D.prototype.lookup=function(a,c){var h=this;this.bbi.data.slice(this.offset,32).fetch(function(l){function q(l){h.bbi.data.slice(l,4+e*(s+p)).fetch(function(l){var k=new Uint8Array(l),e=new Uint16Array(l);new Uint32Array(l);e=e[1];l=4;if(0==k[0]){for(var t=null,n=0;n<e;++n){for(var J="",u=0;u<s;++u){var b=k[l++];0!=b&&(J+=String.fromCharCode(b))}u=d(k,l);l+=8;if(0>a.localeCompare(J)&&t){q(t);return}t=u}q(t)}else{for(n=0;n<e;++n){J="";for(u=0;u<s;++u)b=k[l++],0!=b&&(J+=String.fromCharCode(b));if(J==
a)return e=d(k,l),k=f(k,l+8),h.bbi.getUnzoomedView().fetchFeatures(function(c,l,q,k){if(k&&k.length>h.field-3)return k[h.field-3]==a},[{offset:e,size:k}],c);l+=p}return c([])}})}var k=new Uint8Array(l);new Int16Array(l);l=new Int32Array(l);var e=l[1],s=l[2],p=l[3];d(k,16);q(h.offset+32)})};"undefined"!==typeof z&&(z.exports={makeBwg:y,BIG_BED_MAGIC:L,BIG_WIG_MAGIC:G})},{"./bin":3,"./das":5,"./spans":10,"./utils":11,jszlib:24}],3:[function(b,z,v){function d(a){this.blob=a}function m(a,e,f,n){n||("object"===
typeof e?(n=e,e=void 0):n={});this.url=a;this.start=e||0;f&&(this.end=f);this.opts=n}function C(a){if(!a)return null;for(var e=new Uint8Array(a.length),f=0;f<e.length;++f)e[f]=a.charCodeAt(f);return e.buffer}function y(a,e){return a[e+7]<<24|a[e+6]<<16|a[e+5]<<8|a[e+4]}function D(a,e){return a[e+3]<<24|a[e+2]<<16|a[e+1]<<8|a[e]}function H(a,e){return a[e+1]<<8|a[e]}function E(a,e){return a[e]}function u(a,e){return a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3]}if("undefined"!==typeof b)var a=b("./utils").shallowCopy,
n=b("./sha1").b64_sha1;d.prototype.slice=function(a,e){var f;f=this.blob.slice?e?this.blob.slice(a,a+e):this.blob.slice(a):e?this.blob.webkitSlice(a,a+e):this.blob.webkitSlice(a);return new d(f)};d.prototype.salted=function(){return this};d.prototype.fetch="undefined"!==typeof FileReader?function(a){var e=new FileReader;e.onloadend=function(f){a(C(e.result))};e.readAsBinaryString(this.blob)}:function(a){var e=new FileReaderSync;try{var f=e.readAsArrayBuffer(this.blob);a(f)}catch(n){a(null,n)}};m.prototype.slice=
function(a,e){if(0>a)throw"Bad slice "+a;var f=this.start,n=this.end,f=f&&a?f+a:a||f;return new m(this.url,f,e&&f?f+e-1:n||e-1,this.opts)};var e=0,f=0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome");m.prototype.fetchAsText=function(a){try{var t=new XMLHttpRequest,u=this.url;(f||this.opts.salt)&&0>u.indexOf("?")&&(u=u+"?salt="+n(""+Date.now()+","+ ++e));t.open("GET",u,!0);if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";t.setRequestHeader("Range","bytes="+
this.start+"-"+this.end)}t.onreadystatechange=function(){if(4==t.readyState)return 200==t.status||206==t.status?a(t.responseText):a(null)};this.opts.credentials&&(t.withCredentials=!0);t.send("")}catch(b){return a(null)}};m.prototype.salted=function(){var e=a(this.opts);e.salt=!0;return new m(this.url,this.start,this.end,e)};m.prototype.fetch=function(a,t){var u=this;t=t||{};var b=t.attempt||1,d=t.truncatedLength;if(3<b)return a(null);try{var m;t.timeout&&!this.opts.credentials&&(m=setTimeout(function(){console.log("timing out "+
w);A.abort();return a(null,"Timeout")},t.timeout));var A=new XMLHttpRequest,D,w=this.url;(f||this.opts.salt)&&0>w.indexOf("?")&&(w=w+"?salt="+n(""+Date.now()+","+ ++e));A.open("GET",w,!0);A.overrideMimeType("text/plain; charset=x-user-defined");if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";A.setRequestHeader("Range","bytes="+this.start+"-"+this.end);D=this.end-this.start+1}A.responseType="arraybuffer";A.onreadystatechange=function(){if(4==A.readyState){m&&clearTimeout(m);if(200==A.status||
206==A.status){if(A.response){var e=A.response.byteLength;return!D||D==e||d&&e==d?a(A.response):u.fetch(a,{attempt:b+1,truncatedLength:e})}if(A.mozResponseArrayBuffer)return a(A.mozResponseArrayBuffer);e=A.responseText;return!D||D==e.length||d&&e.length==d?a(C(A.responseText)):u.fetch(a,{attempt:b+1,truncatedLength:e.length})}return u.fetch(a,{attempt:b+1})}};this.opts.credentials&&(A.withCredentials=!0);A.send("")}catch(y){return a(null)}};(function(a){var e=new ArrayBuffer(8),f=new Uint8Array(e),
n=new Float32Array(e);a.readFloat=function(a,e){f[0]=a[e];f[1]=a[e+1];f[2]=a[e+2];f[3]=a[e+3];return n[0]}})(this);"undefined"!==typeof z&&(z.exports={BlobFetchable:d,URLFetchable:m,readInt:D,readIntBE:u,readInt64:y,readShort:H,readByte:E,readFloat:this.readFloat})},{"./sha1":9,"./utils":11}],4:[function(b,z,v){function d(a,n,e,f){this.red=a|0;this.green=n|0;this.blue=e|0;f&&(this.name=f)}function m(a){a="00"+a.toString(16);return a.substring(a.length-2)}function C(a){var n=H[a];n||((n=E.exec(a))?
n=new d("0x"+n[1]|0,"0x"+n[2]|0,"0x"+n[3]|0,a):(n=u.exec(a))?n=new d(n[1]|0,n[2]|0,n[3]|0,a):(console.log("couldn't handle color: "+a),n=H.black),H[a]=n);return n}function y(a,n,e){for(var f=[],p=0;p<e.length;++p)f.push(C(e[p]));e=[];p=0;a:for(;p<a;++p){for(var u=n[0]+1*p/(a-1)*(n[n.length-1]-n[0]),b=0;b<n.length-1;++b)if(u>=n[b]&&u<=n[b+1]){var u=(u-n[b])/(n[b+1]-n[b]),m=f[b],b=f[b+1],b=(new d(m.red*(1-u)+b.red*u|0,m.green*(1-u)+b.green*u|0,m.blue*(1-u)+b.blue*u|0)).toSvgString();e.push(b);continue a}throw"Bad step";
}return e}function D(a,n,e,f){return f?y(a,[0,0.5,1],[n,e,f]):y(a,[0,1],[n,e])}d.prototype.toSvgString=function(){this.name||(this.name="rgb("+this.red+","+this.green+","+this.blue+")");return this.name};d.prototype.toHexString=function(){return"#"+m(this.red)+m(this.green)+m(this.blue)};var H={red:new d(255,0,0,"red"),green:new d(0,255,0,"green"),blue:new d(0,0,255,"blue"),yellow:new d(255,255,0,"yellow"),white:new d(255,255,255,"white"),black:new d(0,0,0,"black"),gray:new d(180,180,180,"gray"),
grey:new d(180,180,180,"grey"),lightskyblue:new d(135,206,250,"lightskyblue"),lightsalmon:new d(255,160,122,"lightsalmon"),hotpink:new d(255,105,180,"hotpink")},E=/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/,u=/rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;"undefined"!==typeof z&&(z.exports={makeColourSteps:y,makeGradient:D,dasColourForName:C})},{}],5:[function(b,z,v){function d(a,e,c,h){this.name=a;this.start=e;this.end=c;this.description=h}function m(a,e){var c;"string"==typeof a?(this.uri=a,c=e||
{}):c=a||{};for(var h in c)"function"!=typeof c[h]&&(this[h]=c[h]);this.coords||(this.coords=[]);this.props||(this.props={});(this.dasBaseURI=this.uri)&&"/"!=this.dasBaseURI.substr(this.uri.length-1)&&(this.dasBaseURI+="/")}function C(){}function y(a,e){return a.taxon==e.taxon&&a.auth==e.auth&&a.version==e.version}function D(a,e,c,h,l){this.name=a;this.start=e;this.end=c;this.alphabet=h;this.seq=l}function H(){}function E(a){a&&(this.id=a)}function u(a,e){this.desc=a;this.uri=e}function a(a){this.type=
a;this.objects={};this.blocks=[]}function n(){this.styles=[]}function e(){}function f(a,e){e=e||{};this.uri=a;this.opts=e}function p(a,e){var c=a.getElementsByTagName(e);if(0<c.length&&c[0].firstChild){c=c[0];if(1==c.childNodes.length)return c.firstChild.nodeValue;for(var h="",l=0;l<c.childNodes.length;++l)h+=c.childNodes[l].nodeValue;return h}return null}function t(a){for(var e=[],c=a.getElementsByTagName("LINK"),h=0;h<c.length;++h){var l=c[h];l.parentNode==a&&e.push(new u(l.firstChild?l.firstChild.nodeValue:
"Unknown",l.getAttribute("href")))}return e}function G(a){var e=[];a=a.getElementsByTagName("NOTE");for(var c=0;c<a.length;++c)a[c].firstChild&&e.push(a[c].firstChild.nodeValue);return e}function I(a,e,c,h){if(window.XDomainRequest){var l=new XDomainRequest;l.onload=function(){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=!1;c.loadXML(l.responseText);e(c)};l.open("get",a);l.send("")}else try{var l=new XMLHttpRequest,q=setTimeout(function(){console.log("timing out "+a);l.abort();e(null,l)},5E3);
l.timeout=5E3;l.ontimeout=function(){console.log("timeout on "+a)};l.onreadystatechange=function(){4==l.readyState&&(clearTimeout(q),(200<=l.status||0==l.status)&&e(l.responseXML,l))};l.open("get",a,!0);c&&(l.withCredentials=!0);h&&l.setRequestHeader("X-DAS-Authorisation",h);l.overrideMimeType("text/xml");l.setRequestHeader("Accept","application/xml,*/*");l.send("")}catch(k){e(null,l,k)}}function L(a){a=(""+a).toLowerCase();return"yes"===a||"true"===a}function M(a){if(!a)return!1;a=(""+a).toLowerCase();
return"no"!==a||"false"!==a}function A(a){var e=K(a);e.styles=[];for(var c=0;c<a.styles.length;++c){var h=e.styles[c]=K(a.styles[c]);h._methodRE=h._labelRE=h._typeRE=void 0;h.style=K(h.style);h.style.id=void 0;h.style._gradient=void 0}return e}if("undefined"!==typeof b){v=b("./utils");var K=v.shallowCopy,w=v.pusho,N=b("./color").makeColourSteps}d.prototype.toString=function(){return this.name+":"+this.start+".."+this.end};d.prototype.isBounded=function(){return this.start&&this.end};d.prototype.toDASQuery=
function(){var a="segment="+this.name;this.start&&this.end&&(a+=":"+this.start+","+this.end);return a};m.prototype.entryPoints=function(a){this.doCrossDomainRequest(this.dasBaseURI+"entry_points",function(e){if(!e)return a([]);var c=[];e=e.getElementsByTagName("SEGMENT");for(var h=0;h<e.length;++h){var l=e[h],q=l.getAttribute("id"),k=l.getAttribute("size"),f;k?(f=1,k|=0):((f=l.getAttribute("start"))&&(f|=0),(k=l.getAttribute("stop"))&&(k|=0));var r=null;l.firstChild&&(r=l.firstChild.nodeValue);c.push(new d(q,
f,k,r))}a(c)})};m.prototype.sequence=function(a,e){var c=this.dasBaseURI+"sequence?"+a.toDASQuery();this.doCrossDomainRequest(c,function(c){if(c){var a=[];c=c.getElementsByTagName("SEQUENCE");for(var q=0;q<c.length;++q){var k=c[q],f=k.getAttribute("id"),r=k.getAttribute("start"),n=k.getAttribute("stop"),s=null;if(k.firstChild)for(var k=k.firstChild.nodeValue,s="",u=0;;){var b=k.indexOf("\n",u);if(0<=b)s+=k.substring(u,b).toUpperCase(),u=b+1;else{s+=k.substring(u).toUpperCase();break}}a.push(new D(f,
r,n,"DNA",s))}e(a)}else e([])})};m.prototype.features=function(a,e,c){e=e||{};var h;if(this.features_uri)h=this.features_uri;else{var l=[];if(a)l.push(a.toDASQuery());else if(e.group)if(a=e.group,"string"==typeof a)l.push("group_id="+a);else for(var q=0;q<a.length;++q)l.push("group_id="+a[q]);if(e.adjacent)for(a=e.adjacent,"string"==typeof a&&(a=[a]),q=0;q<a.length;++q)l.push("adjacent="+a[q]);if(e.type)if("string"==typeof e.type)l.push("type="+e.type);else for(a=0;a<e.type.length;++a)l.push("type="+
e.type[a]);e.maxbins&&l.push("maxbins="+e.maxbins);0<l.length?h=this.dasBaseURI+"features?"+l.join(";"):c([],"No filters specified")}this.doCrossDomainRequest(h,function(h,a){if(h){for(var l=[],e={},q=h.getElementsByTagName("SEGMENT"),f=0;f<q.length;++f){var n=q[f],g=n.getAttribute("id");e[g]={min:n.getAttribute("start"),max:n.getAttribute("stop")};for(var n=n.getElementsByTagName("FEATURE"),u=0;u<n.length;++u){var b=n[u],s=new H;s.segment=g;s.id=b.getAttribute("id");s.label=b.getAttribute("label");
var d=p(b,"START"),A=p(b,"END");(d|0)>(A|0)?(s.min=A|0,s.max=d|0):(s.min=d|0,s.max=A|0);d=b.getElementsByTagName("TYPE");0<d.length&&(d=d[0],d.firstChild&&(s.type=d.firstChild.nodeValue),s.typeId=d.getAttribute("id"),s.typeCv=d.getAttribute("cvId"));s.type=p(b,"TYPE");!s.type&&s.typeId&&(s.type=s.typeId);s.method=p(b,"METHOD");(d=p(b,"ORIENTATION"))||(d="0");s.orientation=d;s.score=p(b,"SCORE");s.links=t(b);s.notes=G(b);d=b.getElementsByTagName("GROUP");for(A=0;A<d.length;++A){var w=d[A],m=new E;
m.type=w.getAttribute("type");m.id=w.getAttribute("id");m.links=t(w);m.notes=G(w);s.groups?s.groups.push(m):s.groups=Array(m)}if(s.notes)for(d=0;d<s.notes.length;++d)A=s.notes[d],0==A.indexOf("Genename=")&&(w=new E,w.type="gene",w.id=A.substring(9),s.groups?s.groups.push(w):s.groups=Array(w));d=b.getElementsByTagName("PART");if(0<d.length){w=[];for(A=0;A<d.length;++A)w.push(d[A].getAttribute("id"));s.parts=w}d=b.getElementsByTagName("PARENT");if(0<d.length){b=[];for(A=0;A<d.length;++A)b.push(d[A].getAttribute("id"));
s.parents=b}l.push(s)}}c(l,void 0,e)}else c([],"Failed request: "+(0==a.status?"server may not support CORS":"status="+a.status))},function(h){c([],h)})};m.prototype.alignments=function(e,f,c){var h=this.dasBaseURI+"alignment?query="+e;this.doCrossDomainRequest(h,function(l){if(l){var e=[];l=l.getElementsByTagName("alignment");for(var k=0;k<l.length;++k){for(var f=l[k],r=new a(f.getAttribute("alignType")),n=f.getElementsByTagName("alignObject"),s=0;s<n.length;++s){var g=n[s],g={id:g.getAttribute("intObjectId"),
accession:g.getAttribute("dbAccessionId"),version:g.getAttribute("objectVersion"),dbSource:g.getAttribute("dbSource"),dbVersion:g.getAttribute("dbVersion")};r.objects[g.id]=g}f=f.getElementsByTagName("block");for(n=0;n<f.length;++n){for(var g=f[n],s={order:g.getAttribute("blockOrder"),segments:[]},g=g.getElementsByTagName("segment"),b=0;b<g.length;++b){var u=g[b],u={object:u.getAttribute("intObjectId"),min:u.getAttribute("start"),max:u.getAttribute("end"),strand:u.getAttribute("strand"),cigar:p(u,
"cigar")};s.segments.push(u)}r.blocks.push(s)}e.push(r)}c(e)}else c([],"Failed request "+h)})};n.prototype.pushStyle=function(a,e,c){a||(a={type:"default"});a=K(a);e&&(a.zoom=e);a.style=c;this.styles.push(a)};m.prototype.stylesheet=function(a,f){var c,h=this.credentials;this.stylesheet_uri?(c=this.stylesheet_uri,h=!1):c=this.dasBaseURI+"stylesheet";I(c,function(c){if(c){var h=new n;c=c.getElementsByTagName("TYPE");for(var k=0;k<c.length;++k){var b=c[k],r={};r.type=b.getAttribute("id");r.label=b.getAttribute("label");
r.method=b.getAttribute("method");for(var b=b.getElementsByTagName("GLYPH"),u=0;u<b.length;++u){var d=b[u],p=d.getAttribute("zoom"),t;a:{if(d.hasChildNodes()){d=d.firstChild;do{if(d.nodeType==Node.ELEMENT_NODE){t=d;break a}d=d.nextSibling}while(null!=d)}t=null}d=new e;d.glyph=t.localName;for(t=t.firstChild;t;){if(t.nodeType==Node.ELEMENT_NODE)if("BGGRAD"==t.localName){var A=d,w=t.localName,m,D=t;m=(m=D.getAttribute("steps"))?m|0:50;for(var y=[],K=[],D=D.getElementsByTagName("STOP"),C=0;C<D.length;++C){var H=
D[C];y.push(1*H.getAttribute("score"));K.push(H.firstChild.nodeValue)}m=N(m,y,K);A[w]=m}else d[t.localName]=t.firstChild.nodeValue;t=t.nextSibling}h.pushStyle(r,p,d)}}a(h)}else f&&f()},h)};f.prototype.sources=function(a,e,c){c||(c={});var h=[];c.taxon&&h.push("organism="+c.taxon);c.auth&&h.push("authority="+c.auth);c.version&&h.push("version="+c.version);c=this.uri;0<h.length&&(c=c+"?"+h.join("&"));I(c,function(c){if(!c&&e)e();else{var h=[];c=c.getElementsByTagName("SOURCE");for(var k=0;k<c.length;++k){var f=
c[k],n=f.getElementsByTagName("VERSION");if(!(1>n.length)){for(var b=n[0],u=b.getElementsByTagName("COORDINATES"),n=[],d=0;d<u.length;++d){var p=u[d],t=new C;t.auth=p.getAttribute("authority");t.taxon=p.getAttribute("taxid");t.version=p.getAttribute("version");n.push(t)}for(var u=[],p=b.getElementsByTagName("CAPABILITY"),A,d=0;d<p.length;++d)t=p[d],u.push(t.getAttribute("type")),"das1:features"==t.getAttribute("type")&&(A=t.getAttribute("query_uri"),A=A.substring(0,A.length-8));d={};b=b.getElementsByTagName("PROP");
for(p=0;p<b.length;++p)w(d,b[p].getAttribute("name"),b[p].getAttribute("value"));A&&(f=new m(A,{source_uri:f.getAttribute("uri"),name:f.getAttribute("title"),desc:f.getAttribute("description"),coords:n,props:d,capabilities:u}),h.push(f))}}a(h)}})};m.prototype.doCrossDomainRequest=function(a,e,c){var h;this.xUser&&(h="Basic "+btoa(this.xUser+":"+this.xPass));try{return I(a,e,this.credentials,h)}catch(l){if(c)c(l);else throw l;}};"undefined"!==typeof z&&(z.exports={DASGroup:E,DASFeature:H,DASStylesheet:n,
DASStyle:e,DASSource:m,DASSegment:d,DASRegistry:f,DASSequence:D,DASLink:u,isDasBooleanTrue:L,isDasBooleanNotFalse:M,copyStylesheet:A,coordsMatch:y})},{"./color":4,"./utils":11}],6:[function(b,z,v){function d(b,d){0>b.indexOf("?")&&(b+="?soft=true");return new y(function(m,u){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(300<=a.status)u("Error code "+a.status);else{var b=JSON.parse(a.response);m(d?b:b.location)}};a.open("GET",b,!0);a.setRequestHeader("Accept","application/json");
a.responseType="text";a.send("")})}function m(b){this.rawurl=b}function C(b,d,y,u){u||("object"===typeof d?(u=d,d=void 0):u={});this.url="string"===typeof b?new m(b):b;this.start=d||0;y&&(this.end=y);this.opts=u}if("undefined"!==typeof b)var y=b("es6-promise").Promise;m.prototype.getURLPromise=function(){this.urlPromise&&this.urlPromiseValidity>Date.now()||(this.urlPromise=d(this.rawurl,!0).then(function(b){return b.location}),this.urlPromiseValidity=Date.now()+432E5);return this.urlPromise};C.prototype.slice=
function(b,d){if(0>b)throw"Bad slice "+b;var m=this.start,u=this.end,m=m&&b?m+b:b||m;return new C(this.url,m,d&&m?m+d-1:u||d-1,this.opts)};C.prototype.fetchAsText=function(b){var d=this,m=new XMLHttpRequest;d.url.getURLPromise().then(function(u){m.open("GET",u,!0);if(d.end){if(1E8<d.end-d.start)throw"Monster fetch!";m.setRequestHeader("Range","bytes="+d.start+"-"+d.end)}m.onreadystatechange=function(){if(4==m.readyState)return 200==m.status||206==m.status?b(m.responseText):b(null)};d.opts.credentials&&
(m.withCredentials=!0);m.send("")}).catch(function(d){console.log(d);return b(null)})};C.prototype.salted=function(){return this};C.prototype.fetch=function(b,d,m){var u=this;d=d||1;if(3<d)return b(null);u.url.getURLPromise().then(function(a){var n=new XMLHttpRequest,e;n.open("GET",a,!0);n.overrideMimeType("text/plain; charset=x-user-defined");if(u.end){if(1E8<u.end-u.start)throw"Monster fetch!";n.setRequestHeader("Range","bytes="+u.start+"-"+u.end);e=u.end-u.start+1}n.responseType="arraybuffer";
n.onreadystatechange=function(){if(4==n.readyState){if(200==n.status||206==n.status){if(n.response){var a=n.response.byteLength;return!e||e==a||m&&a==m?b(n.response):u.fetch(b,d+1,a)}if(n.mozResponseArrayBuffer)return b(n.mozResponseArrayBuffer);a=n.responseText;if(!e||e==a.length||m&&a.length==m){if(a=n.responseText){for(var p=new Uint8Array(a.length),t=0;t<p.length;++t)p[t]=a.charCodeAt(t);a=p.buffer}else a=null;return b(a)}return u.fetch(b,d+1,a.length)}return u.fetch(b,d+1)}};u.opts.credentials&&
(n.withCredentials=!0);n.send("")}).catch(function(a){console.log(a)})};"undefined"!==typeof z&&(z.exports={lookupEncodeURI:d,EncodeFetchable:C})},{"es6-promise":12}],7:[function(b,z,v){(function(d){function m(a){this.bam=a}function C(a){this.bbi=a}var y=b("./bin"),D=b("./bam"),v=b("./bigwig"),z=b("./encode"),u=b("./utils"),a={},n=0;d.newID=function(){return"cn"+ ++n};postMessage({tag:"init"});self.onmessage=function(e){var f=e.data,b=e.data.command,d=e.data.tag;if("connectBAM"===b){var n=newID(),
I;f.blob?(e=new y.BlobFetchable(f.blob),b=new y.BlobFetchable(f.indexBlob)):(e=new y.URLFetchable(f.uri,{credentials:f.credentials}),b=new y.URLFetchable(f.indexUri,{credentials:f.credentials}),I=f.indexChunks);D.makeBam(e,b,I,function(e,f){e?(a[n]=new m(e),postMessage({tag:d,result:n})):postMessage({tag:d,error:f||"Couldn't fetch BAM"})})}else if("connectBBI"===b)n=newID(),I=f.blob?new y.BlobFetchable(f.blob):"encode"==f.transport?new z.EncodeFetchable(f.uri,{credentials:f.credentials}):new y.URLFetchable(f.uri,
{credentials:f.credentials}),v.makeBwg(I,function(e,f){e?(a[n]=new C(e),postMessage({tag:d,result:n})):postMessage({tag:d,error:f||"Couldn't fetch BBI"})},f.uri);else if("textxhr"===b)u.textXHR(f.uri,function(a,e){a?postMessage({tag:d,result:a}):postMessage({tag:d,err:e||"Couldn't fetch resource"})});else if("fetch"===b){I=a[e.data.connection];if(!I)return postMessage({tag:d,error:"No such connection: "+e.data.connection});I.fetch(f.tag,f.chr,f.min,f.max,f.zoom,f.opts)}else if("leap"===b){I=a[e.data.connection];
if(!I)return postMessage({tag:d,error:"No such connection: "+e.data.connection});I.leap(f.tag,f.chr,f.pos,f.dir)}else if("quantLeap"===b){I=a[e.data.connection];if(!I)return postMessage({tag:d,error:"No such connection: "+e.data.connection});I.quantLeap(f.tag,f.chr,f.pos,f.dir,f.threshold,f.under)}else if("meta"===b){I=a[e.data.connection];if(!I)return postMessage({tag:d,error:"No such connection: "+e.data.connection});I.meta(f.tag)}else if("search"===b){I=a[e.data.connection];if(!I)return postMessage({tag:d,
error:"No such connection: "+e.data.connection});I.search(f.tag,f.query,f.index)}else{if("date"===b)return postMessage({tag:d,result:Date.now()|0});postMessage({tag:d,error:"Bad command "+b})}};m.prototype.fetch=function(a,f,b,d,n,u){u=u||{};this.bam.fetch(f,b,d,function(f,b){f?postMessage({tag:a,result:f,time:Date.now()|0}):postMessage({tag:a,error:b})},u)};C.prototype.fetch=function(a,f,b,d,n){"number"!==typeof n&&(n=-1);(0>n?this.bbi.getUnzoomedView():this.bbi.getZoomedView(n)).readWigData(f,b,
d,function(f){postMessage({tag:a,result:f})})};C.prototype.meta=function(a){for(var f=[1],b=0;b<this.bbi.zoomLevels.length;++b)f.push(this.bbi.zoomLevels[b].reduction);var d=this,n={type:this.bbi.type,zoomLevels:f,fieldCount:this.bbi.fieldCount,definedFieldCount:this.bbi.definedFieldCount,schema:this.bbi.schema};"bigbed"===this.bbi.type?this.bbi.getExtraIndices(function(f){f&&(d.extraIndices=f,n.extraIndices=f.map(function(a){return a.field}));postMessage({tag:a,result:n})}):postMessage({tag:a,result:n})};
C.prototype.leap=function(a,f,b,d){this.bbi.getUnzoomedView().getFirstAdjacent(f,b,d,function(f,b){postMessage({tag:a,result:f,error:b})})};C.prototype.quantLeap=function(a,f,b,d,n,u){this.bbi.thresholdSearch(f,b,d,n,function(f,b){postMessage({tag:a,result:f,error:b})})};C.prototype.search=function(a,f,b){this.extraIndices[0].lookup(f,function(f,b){postMessage({tag:a,result:f,error:b})})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bam":1,"./bigwig":2,"./bin":3,
"./encode":6,"./utils":11}],8:[function(b,z,v){function d(a,b){this.block=a;this.offset=b}function m(a,b){var e=4294967296*(a[b+6]&255)+16777216*(a[b+5]&255)+65536*(a[b+4]&255)+256*(a[b+3]&255)+(a[b+2]&255),f=a[b+1]<<8|a[b];return 0==e&&0==f?null:new d(e,f)}function C(a,b){b=Math.min(b||1,a.byteLength-50);for(var e=[],f=[0],d=0;f[0]<b;){var t=new Uint8Array(a,f[0],12),t=t[11]<<8|t[10],t=E(a,12+t+f[0],Math.min(65536,a.byteLength-12-t-f[0]),f);f[0]+=8;d+=t.byteLength;e.push(t)}if(1==e.length)return e[0];
f=new Uint8Array(d);for(t=d=0;t<e.length;++t){var m=new Uint8Array(e[t]);u(m,0,f,d,m.length);d+=m.length}return f.buffer}function y(a,b){this.minv=a;this.maxv=b}function D(a,b){--b;return a>>14==b>>14?4681+(a>>14):a>>17==b>>17?585+(a>>17):a>>20==b>>20?73+(a>>20):a>>23==b>>23?9+(a>>23):a>>26==b>>26?1+(a>>26):0}function H(a,b){var e,f=[];--b;f.push(0);for(e=1+(a>>26);e<=1+(b>>26);++e)f.push(e);for(e=9+(a>>23);e<=9+(b>>23);++e)f.push(e);for(e=73+(a>>20);e<=73+(b>>20);++e)f.push(e);for(e=585+(a>>17);e<=
585+(b>>17);++e)f.push(e);for(e=4681+(a>>14);e<=4681+(b>>14);++e)f.push(e);return f}if("undefined"!==typeof b){b=b("jszlib");var E=b.inflateBuffer,u=b.arrayCopy}d.prototype.toString=function(){return""+this.block+":"+this.offset};"undefined"!==typeof z&&(z.exports={unbgzf:C,readVob:m,reg2bin:D,reg2bins:H,Chunk:y})},{jszlib:24}],9:[function(b,z,v){function d(b){b=C(y(b));for(var a=H?"0123456789ABCDEF":"0123456789abcdef",d="",e,f=0;f<b.length;f++)e=b.charCodeAt(f),d+=a.charAt(e>>>4&15)+a.charAt(e&15);
return d}function m(b){b=C(y(b));for(var a="",d=b.length,e=0;e<d;e+=3)for(var f=b.charCodeAt(e)<<16|(e+1<d?b.charCodeAt(e+1)<<8:0)|(e+2<d?b.charCodeAt(e+2):0),p=0;4>p;p++)a=8*e+6*p>8*b.length?a+E:a+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>>6*(3-p)&63);return a}function C(b){for(var a=Array(b.length>>2),d=0;d<a.length;d++)a[d]=0;for(d=0;d<8*b.length;d+=8)a[d>>5]|=(b.charCodeAt(d/8)&255)<<24-d%32;b=8*b.length;a[b>>5]|=128<<24-b%32;a[(b+64>>9<<4)+15]=b;b=Array(80);
for(var d=1732584193,e=-271733879,f=-1732584194,p=271733878,t=-1009589776,m=0;m<a.length;m+=16){for(var y=d,C=e,v=f,A=p,K=t,w=0;80>w;w++){if(16>w)b[w]=a[m+w];else{var z=b[w-3]^b[w-8]^b[w-14]^b[w-16];b[w]=z<<1|z>>>31}var z=d<<5|d>>>27,s;s=20>w?e&f|~e&p:40>w?e^f^p:60>w?e&f|e&p|f&p:e^f^p;z=D(D(z,s),D(D(t,b[w]),20>w?1518500249:40>w?1859775393:60>w?-1894007588:-899497514));t=p;p=f;f=e<<30|e>>>2;e=d;d=z}d=D(d,y);e=D(e,C);f=D(f,v);p=D(p,A);t=D(t,K)}a=[d,e,f,p,t];b="";for(d=0;d<32*a.length;d+=8)b+=String.fromCharCode(a[d>>
5]>>>24-d%32&255);return b}function y(b){for(var a="",d=-1,e,f;++d<b.length;)e=b.charCodeAt(d),f=d+1<b.length?b.charCodeAt(d+1):0,55296<=e&&56319>=e&&56320<=f&&57343>=f&&(e=65536+((e&1023)<<10)+(f&1023),d++),127>=e?a+=String.fromCharCode(e):2047>=e?a+=String.fromCharCode(192|e>>>6&31,128|e&63):65535>=e?a+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|e&63):2097151>=e&&(a+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|e&63));return a}function D(b,a){var d=(b&65535)+(a&65535);
return(b>>16)+(a>>16)+(d>>16)<<16|d&65535}var H=0,E="";"undefined"!==typeof z&&(z.exports={b64_sha1:m,hex_sha1:d})},{}],10:[function(b,z,v){function d(b,a){if("number"!=typeof b||"number"!=typeof a)throw"Bad range "+b+","+a;this._min=b;this._max=a}function m(b){this._ranges=b}function C(b,a){b instanceof Array||(b=[b],a&&b.push(a));if(0==b.length)return null;if(1==b.length)return b[0];for(var n=[],e=0;e<b.length;++e)b[e]._pushRanges(n);for(var n=n.sort(E),e=[],f=n[0],f=new d(f._min,f._max),p=1;p<
n.length;++p){var t=n[p];t._min>f._max+1?(e.push(f),f=new d(t._min,t._max)):t._max>f._max&&(f._max=t._max)}e.push(f);return 1==e.length?e[0]:new m(e)}function y(b,a){for(var n=b.ranges(),e=a.ranges(),f=n.length,p=e.length,t=0,y=0,C=[];t<f&&y<p;){b=n[t];a=e[y];var D=Math.max(b.min(),a.min()),z=Math.min(b.max(),a.max());z>=D&&C.push(new d(D,z));b.max()>a.max()?++y:++t}return 0==C.length?null:1==C.length?C[0]:new m(C)}function D(b){var a=0;b=b.ranges();for(var d=0;d<b.length;++d)var e=b[d],a=a+(e.max()-
e.min()+1);return a}function H(b,a){return b.min()<a.min()?-1:b.min()>a.min()?1:b.max()<a.max()?-1:a.max()>b.max()?1:0}function E(b,a){return b._min<a._min?-1:b._min>a._min?1:b._max<a._max?-1:a._max>b._max?1:0}d.prototype.min=function(){return this._min};d.prototype.max=function(){return this._max};d.prototype.contains=function(b){return b>=this._min&&b<=this._max};d.prototype.isContiguous=function(){return!0};d.prototype.ranges=function(){return[this]};d.prototype._pushRanges=function(b){b.push(this)};
d.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"};m.prototype.min=function(){return this._ranges[0].min()};m.prototype.max=function(){return this._ranges[this._ranges.length-1].max()};m.prototype.contains=function(b){for(var a=0;a<this._ranges.length;++a)if(this._ranges[a].contains(b))return!0;return!1};m.prototype.isContiguous=function(){return 1<this._ranges.length};m.prototype.ranges=function(){return this._ranges};m.prototype._pushRanges=function(b){for(var a=0;a<this._ranges.length;++a)b.push(this._ranges[a])};
m.prototype.toString=function(){for(var b="",a=0;a<this._ranges.length;++a)0<a&&(b+=","),b+=this._ranges[a].toString();return b};"undefined"!==typeof z&&(z.exports={Range:d,union:C,intersection:y,coverage:D,rangeOver:H,_rangeOrder:E})},{}],11:[function(b,z,v){function d(a,e){for(var b=0;b<a.length;++b)if(a[b]==e)return;a.push(e)}function m(a,e,b){a[e]?a[e].push(b):a[e]=[b]}function C(a,e,b){var d=a[e];if(d){for(a=0;a<d.length;++a)if(d[a]==b)return;d.push(b)}else a[e]=[b]}function y(a,e,b,d){if(a)return a;
if(e)return e;if(b)return b;if(d)return d}function d(a,e){for(var b=0;b<a.length;++b)if(a[b]==e)return;a.push(e)}function D(a,e){if(!a)return-1;for(var b=0;b<a.length;++b)if(a[b]===e)return b;return-1}function H(a,b,e,d){a=document.createElement(a);if(b){b instanceof Array||(b=[b]);for(var f=0;f<b.length;++f){var g=b[f];g&&("string"==typeof g?g=document.createTextNode(g):"number"==typeof g&&(g=document.createTextNode(""+g)),a.appendChild(g))}}if(e)for(var c in e)try{a[c]=e[c]}catch(h){throw console.log("error setting "+
c),h;}if(d)for(c in d)a.style[c]=d[c];return a}function E(a,b,e,d){a=document.createElementNS(a,b);if(e)for(e instanceof Array||(e=[e]),b=0;b<e.length;++b){var f=e[b];"string"==typeof f&&(f=document.createTextNode(f));a.appendChild(f)}if(d)for(var g in d){e=a;b=g;var f=d[g],c=L[b];if(!c){for(var c="",h=0;h<b.length;++h)var l=b.substring(h,h+1),q=l.toLowerCase(),c=q!=l?c+"-"+q:c+l;L[b]=c}e.setAttribute(c,f)}return a}function u(a){if(a&&a.childNodes)for(;0<a.childNodes.length;)a.removeChild(a.firstChild)}
function a(b,e){if("undefined"===typeof b)return"undefined";if(null==b)return"null";if("string"==typeof b)return"'"+b+"'";if("number"==typeof b||"boolean"==typeof b)return""+b;if("object"==typeof b){if(b instanceof Array){for(var d=null,f=0;f<b.length;++f)d=(null==d?"":d+", ")+a(b[f],e);return"["+(d?d:"")+"]"}e=e||{};d=null;for(f in b)e[f]||void 0!=f&&"function"!=typeof b[f]&&(d=(null==d?"":d+", ")+f+": "+a(b[f],e));return"{"+(d?d:"")+"}"}return typeof b}function n(a){var b={},e;for(e in a)b[e]=a[e];
return b}function e(a){this.value=a;this.listeners=[]}function f(){this.queue=[]}function p(a,b,e){e&&e.salt&&(a=a+"?salt="+I(""+Date.now()+","+ ++M));try{var d;e.timeout&&(d=setTimeout(function(){console.log("timing out "+a);f.abort();return b(null,"Timeout")},e.timeout));var f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&(d&&clearTimeout(d),200>f.status||300<=f.status?b(null,"Error code "+f.status):b(f.responseText))};f.open("GET",a,!0);f.responseType="text";e&&e.credentials&&
(f.withCredentials=!0);f.send("")}catch(g){b(null,"Exception "+g)}}function t(a,b){if(0==b.indexOf("http:")||0==b.indexOf("https:"))return b;var e=a.lastIndexOf("/");return 0<=e?a.substr(0,e+1)+b:b}function G(a){return H("a",null,{href:a}).href}if("undefined"!==typeof b)var I=b("./sha1").b64_sha1;var L={};e.prototype.addListener=function(a){this.listeners.push(a)};e.prototype.addListenerAndFire=function(a){this.listeners.push(a);a(this.value)};e.prototype.removeListener=function(a){var b=this.listeners;
a=D(b,a);0<=a&&b.splice(a,1)};e.prototype.get=function(){return this.value};e.prototype.set=function(a){this.value=a;for(var b=0;b<this.listeners.length;++b)this.listeners[b](a)};f.prototype.provide=function(a){if(void 0!==this.res)throw"Resource has already been provided.";this.res=a;for(var b=0;b<this.queue.length;++b)this.queue[b](a);this.queue=null};f.prototype.await=function(a){if(void 0!==this.res)return a(this.res),this.res;this.queue.push(a)};var M=0;b={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",
CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"*",TAG:"*",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"*",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"};"trim"in String.prototype||(String.prototype.trim=
function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});"undefined"!==typeof z&&(z.exports={textXHR:p,relativeURL:t,resolveUrlToPage:G,shallowCopy:n,pusho:m,pushnew:d,pushnewo:C,arrayIndexOf:D,pick:y,makeElement:H,makeElementNS:E,removeChildren:u,miniJSONify:a,Observed:e,Awaited:f,AMINO_ACID_TRANSLATION:b})},{"./sha1":9}],12:[function(b,z,v){z=b("./promise/promise").Promise;b=b("./promise/polyfill").polyfill;v.Promise=z;v.polyfill=b},{"./promise/polyfill":17,"./promise/promise":18}],13:[function(b,
z,v){var d=b("./utils").isArray,m=b("./utils").isFunction;v.all=function(b){if(!d(b))throw new TypeError("You must pass an array to all.");return new this(function(d,D){function z(a){return function(b){v[a]=b;0===--u&&d(v)}}var v=[],u=b.length,a;0===u&&d([]);for(var n=0;n<b.length;n++)(a=b[n])&&m(a.then)?a.then(z(n),D):(v[n]=a,0===--u&&d(v))})}},{"./utils":22}],14:[function(b,z,v){(function(b,m){function C(){return function(){b.nextTick(z)}}function y(){var a=0,b=new u(z),e=document.createTextNode("");
b.observe(e,{characterData:!0});return function(){e.data=a=++a%2}}function D(){return function(){a.setTimeout(z,1)}}function z(){for(var a=0;a<n.length;a++){var b=n[a];(0,b[0])(b[1])}n=[]}var E="undefined"!==typeof window?window:{},u=E.MutationObserver||E.WebKitMutationObserver,a="undefined"!==typeof m?m:void 0===this?window:this,n=[],e;e="undefined"!==typeof b&&"[object process]"==={}.toString.call(b)?C():u?y():D();v.asap=function(a,b){1===n.push([a,b])&&e()}}).call(this,b("1YiZ5S"),"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"1YiZ5S":23}],15:[function(b,z,v){v.cast=function(b){return b&&"object"===typeof b&&b.constructor===this?b:new this(function(m){m(b)})}},{}],16:[function(b,z,v){var d={instrument:!1};v.config=d;v.configure=function(b,C){if(2===arguments.length)d[b]=C;else return d[b]}},{}],17:[function(b,z,v){(function(d){var m=b("./promise").Promise,C=b("./utils").isFunction;v.polyfill=function(){var b;b="undefined"!==typeof d?d:"undefined"!==typeof window&&
window.document?window:self;"Promise"in b&&"cast"in b.Promise&&"resolve"in b.Promise&&"reject"in b.Promise&&"all"in b.Promise&&"race"in b.Promise&&function(){var d;new b.Promise(function(b){d=b});return C(d)}()||(b.Promise=m)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./promise":18,"./utils":22}],18:[function(b,z,v){function d(a){if(!t(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof
d))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[];m(a,this)}function m(b,e){function c(c){E(e,c)}function h(c){a(e,c)}try{b(c,h)}catch(l){h(l)}}function C(b,e,c,h){var l=t(c),q,d,f,r;if(l)try{q=c(h),f=!0}catch(B){r=!0,d=B}else q=h,f=!0;H(e,q)||(l&&f?E(e,q):r?a(e,d):b===w?E(e,q):b===N&&a(e,q))}function y(a,b,c,h){a=a._subscribers;var e=a.length;a[e]=b;a[e+w]=c;a[e+N]=h}function D(a,b){for(var c,
h,e=a._subscribers,q=a._detail,d=0;d<e.length;d+=3)c=e[d],h=e[d+b],C(b,c,h,q);a._subscribers=null}function H(b,e){var c=null,h;try{if(b===e)throw new TypeError("A promises callback cannot return that same promise.");if(p(e)&&(c=e.then,t(c)))return c.call(e,function(c){if(h)return!0;h=!0;e!==c?E(b,c):u(b,c)},function(c){if(h)return!0;h=!0;a(b,c)}),!0}catch(l){if(h)return!0;a(b,l);return!0}return!1}function E(a,b){a===b?u(a,b):H(a,b)||u(a,b)}function u(a,b){a._state===A&&(a._state=K,a._detail=b,f.async(n,
a))}function a(a,b){a._state===A&&(a._state=K,a._detail=b,f.async(e,a))}function n(a){D(a,a._state=w)}function e(a){D(a,a._state=N)}var f=b("./config").config;b("./config");var p=b("./utils").objectOrFunction,t=b("./utils").isFunction;b("./utils");z=b("./cast").cast;var G=b("./all").all,I=b("./race").race,L=b("./resolve").resolve,M=b("./reject").reject;b=b("./asap").asap;f.async=b;var A=void 0,K=0,w=1,N=2;d.prototype={constructor:d,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,
b){var c=this,h=new this.constructor(function(){});if(this._state){var e=arguments;f.async(function(){C(c._state,h,e[c._state-1],c._detail)})}else y(this,h,a,b);return h},"catch":function(a){return this.then(null,a)}};d.all=G;d.cast=z;d.race=I;d.resolve=L;d.reject=M;v.Promise=d},{"./all":13,"./asap":14,"./cast":15,"./config":16,"./race":19,"./reject":20,"./resolve":21,"./utils":22}],19:[function(b,z,v){var d=b("./utils").isArray;v.race=function(b){if(!d(b))throw new TypeError("You must pass an array to race.");
return new this(function(d,y){for(var D,z=0;z<b.length;z++)(D=b[z])&&"function"===typeof D.then?D.then(d,y):d(D)})}},{"./utils":22}],20:[function(b,z,v){v.reject=function(b){return new this(function(m,C){C(b)})}},{}],21:[function(b,z,v){v.resolve=function(b){return new this(function(m,C){m(b)})}},{}],22:[function(b,z,v){function d(b){return"function"===typeof b}b=Date.now||function(){return(new Date).getTime()};v.objectOrFunction=function(b){return d(b)||"object"===typeof b&&null!==b};v.isFunction=
d;v.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)};v.now=b},{}],23:[function(b,z,v){function d(){}b=z.exports={};b.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(b){return window.setImmediate(b)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var b=[];window.addEventListener("message",function(d){var y=d.source;y!==window&&null!==y||"process-tick"!==d.data||(d.stopPropagation(),0<b.length&&b.shift()())},
!0);return function(d){b.push(d);window.postMessage("process-tick","*")}}return function(b){setTimeout(b,0)}}();b.title="browser";b.browser=!0;b.env={};b.argv=[];b.on=d;b.addListener=d;b.once=d;b.off=d;b.removeListener=d;b.removeAllListeners=d;b.emit=d;b.binding=function(b){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(b){throw Error("process.chdir is not supported");}},{}],24:[function(b,z,v){function d(){}function m(){this.was=[0]}function C(c,b,
e){this.hufts=new Int32Array(3*a);this.window=new Uint8Array(e);this.end=e;this.checkfn=b;this.mode=G;this.reset(c,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new y;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new D}function y(){}function D(){}function H(c,a,b,e,d){if(0!=d){if(!c)throw"Undef src";if(!b)throw"Undef dest";if(0==a&&d==c.length)b.set(c,e);else if(g)c=c.subarray(a,a+d),b.set(c,e);
else if(1==c.BYTES_PER_ELEMENT&&100<d)c=new Uint8Array(c.buffer,c.byteOffset+a,d),b.set(c,e);else for(var f=0;f<d;++f)b[e+f]=c[a+f]}}function E(c,a,b,q){c=a?b?new Uint8Array(c,a,b):new Uint8Array(c,a,c.byteLength-a):new Uint8Array(c);b=new d;b.inflateInit(u,!0);b.next_in=c;b.next_in_index=0;b.avail_in=c.length;c=[];for(var k=0;;){var g=new Uint8Array(32E3);b.next_out=g;b.next_out_index=0;b.avail_out=g.length;var r=b.inflate(n);if(r!=e&&r!=f&&r!=p)throw b.msg;if(0!=b.avail_out){var B=new Uint8Array(g.length-
b.avail_out);H(g,0,B,0,g.length-b.avail_out);g=B}c.push(g);k+=g.length;if(r==f||r==p)break}q&&(q[0]=(a||0)+b.next_in_index);if(1==c.length)return c[0].buffer;a=new Uint8Array(k);for(b=q=0;b<c.length;++b)k=c[b],H(k,0,a,q,k.length),q+=k.length;return a.buffer}var u=15,a=1440,n=0,e=0,f=1,p=-5,t=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],G=0,I=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,
88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,
7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,
57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,
0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,
9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,
0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,
7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,
192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],L=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,
5,24577],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],K=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];d.prototype.inflateInit=function(c,a){c||(c=u);a&&(a=!1);this.istate=new m;return this.istate.inflateInit(this,a?-c:c)};d.prototype.inflate=
function(c){return null==this.istate?-2:this.istate.inflate(this,c)};d.prototype.inflateEnd=function(){if(null==this.istate)return-2;var c=istate.inflateEnd(this);this.istate=null;return c};d.prototype.inflateSync=function(){return istate.inflateSync(this)};d.prototype.inflateSetDictionary=function(c,a){return istate.inflateSetDictionary(this,c,a)};m.prototype.inflateReset=function(c){if(null==c||null==c.istate)return-2;c.total_in=c.total_out=0;c.msg=null;c.istate.mode=0!=c.istate.nowrap?7:0;c.istate.blocks.reset(c,
null);return e};m.prototype.inflateEnd=function(c){null!=this.blocks&&this.blocks.free(c);this.blocks=null;return e};m.prototype.inflateInit=function(c,a){this.blocks=c.msg=null;nowrap=0;0>a&&(a=-a,nowrap=1);if(8>a||15<a)return this.inflateEnd(c),-2;this.wbits=a;c.istate.blocks=new C(c,0!=c.istate.nowrap?null:this,1<<a);this.inflateReset(c);return e};m.prototype.inflate=function(c,a){var b,d;if(null==c||null==c.istate||null==c.next_in)return-2;a=4==a?p:e;for(b=p;;)switch(c.istate.mode){case 0:if(0==
c.avail_in)return b;b=a;c.avail_in--;c.total_in++;if(8!=((c.istate.method=c.next_in[c.next_in_index++])&15)){c.istate.mode=13;c.msg="unknown compression method";c.istate.marker=5;break}if((c.istate.method>>4)+8>c.istate.wbits){c.istate.mode=13;c.msg="invalid window size";c.istate.marker=5;break}c.istate.mode=1;case 1:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;d=c.next_in[c.next_in_index++]&255;if(0!=((c.istate.method<<8)+d)%31){c.istate.mode=13;c.msg="incorrect header check";c.istate.marker=
5;break}if(0==(d&32)){c.istate.mode=7;break}c.istate.mode=2;case 2:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need=(c.next_in[c.next_in_index++]&255)<<24&4278190080;c.istate.mode=3;case 3:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<16&16711680;c.istate.mode=4;case 4:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<8&65280;c.istate.mode=5;case 5:if(0==c.avail_in)return b;
c.avail_in--;c.total_in++;c.istate.need+=c.next_in[c.next_in_index++]&255;c.adler=c.istate.need;c.istate.mode=6;return 2;case 6:return c.istate.mode=13,c.msg="need dictionary",c.istate.marker=0,-2;case 7:b=c.istate.blocks.proc(c,b);if(-3==b){c.istate.mode=13;c.istate.marker=0;break}b==e&&(b=a);if(b!=f)return b;b=a;c.istate.blocks.reset(c,c.istate.was);if(0!=c.istate.nowrap){c.istate.mode=12;break}c.istate.mode=8;case 8:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need=(c.next_in[c.next_in_index++]&
255)<<24&4278190080;c.istate.mode=9;case 9:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<16&16711680;c.istate.mode=10;case 10:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need+=(c.next_in[c.next_in_index++]&255)<<8&65280;c.istate.mode=11;case 11:if(0==c.avail_in)return b;b=a;c.avail_in--;c.total_in++;c.istate.need+=c.next_in[c.next_in_index++]&255;if(c.istate.was[0]!=c.istate.need){c.istate.mode=13;c.msg="incorrect data check";
c.istate.marker=5;break}c.istate.mode=12;case 12:return f;case 13:return-3;default:return-2}};m.prototype.inflateSetDictionary=function(c,a,b){var d=0,f=b;if(null==c||null==c.istate||6!=c.istate.mode)return-2;if(c._adler.adler32(1,a,0,b)!=c.adler)return-3;c.adler=c._adler.adler32(0,null,0,0);f>=1<<c.istate.wbits&&(f=(1<<c.istate.wbits)-1,d=b-f);c.istate.blocks.set_dictionary(a,d,f);c.istate.mode=7;return e};var N=[0,0,255,255];m.prototype.inflateSync=function(c){var a,b,d;if(null==c||null==c.istate)return-2;
13!=c.istate.mode&&(c.istate.mode=13,c.istate.marker=0);if(0==(a=c.avail_in))return p;b=c.next_in_index;for(d=c.istate.marker;0!=a&&4>d;)c.next_in[b]==N[d]?d++:d=0!=c.next_in[b]?0:4-d,b++,a--;c.total_in+=b-c.next_in_index;c.next_in_index=b;c.avail_in=a;c.istate.marker=d;if(4!=d)return-3;a=c.total_in;b=c.total_out;this.inflateReset(c);c.total_in=a;c.total_out=b;c.istate.mode=7;return e};m.prototype.inflateSyncPoint=function(c){return null==c||null==c.istate||null==c.istate.blocks?-2:c.istate.blocks.sync_point()};
var s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];C.prototype.reset=function(c,a){a&&(a[0]=this.check);6==this.mode&&this.codes.free(c);this.mode=G;this.read=this.write=this.bitb=this.bitk=0;this.checkfn&&(c.adler=this.check=c._adler.adler32(0,null,0,0))};C.prototype.proc=function(c,a){var b,d,k,g,r,B,n;g=c.next_in_index;r=c.avail_in;d=this.bitb;k=this.bitk;B=this.write;for(n=B<this.read?this.read-B-1:this.end-B;;)switch(this.mode){case G:for(;3>k;){if(0!=r)a=e;else return this.bitb=d,this.bitk=
k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);r--;d|=(c.next_in[g++]&255)<<k;k+=8}b=d&7;this.last=b&1;switch(b>>>1){case 0:d>>>=3;k-=3;b=k&7;d>>>=b;k-=b;this.mode=1;break;case 1:var p=new Int32Array(1),m=new Int32Array(1),u=[],x=[];b=m;var w=u,y=x;p[0]=9;b[0]=5;w[0]=I;y[0]=L;this.codes.init(p[0],m[0],u[0],0,x[0],0,c);d>>>=3;k-=3;this.mode=6;break;case 2:d>>>=3;k-=3;this.mode=3;break;case 3:return d>>>=3,k-=3,this.mode=13,c.msg="invalid block type",
a=-3,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a)}break;case 1:for(;32>k;){if(0!=r)a=e;else return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);r--;d|=(c.next_in[g++]&255)<<k;k+=8}if((~d>>>16&65535)!=(d&65535))return this.mode=13,c.msg="invalid stored block lengths",a=-3,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=
g,this.write=B,this.inflate_flush(c,a);this.left=d&65535;d=k=0;this.mode=0!=this.left?2:0!=this.last?7:G;break;case 2:if(0==r)return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,write=B,this.inflate_flush(c,a);if(0==n&&(B==end&&0!=read&&(B=0,n=B<this.read?this.read-B-1:this.end-B),0==n&&(this.write=B,a=this.inflate_flush(c,a),B=this.write,n=B<this.read?this.read-B-1:this.end-B,B==this.end&&0!=this.read&&(B=0,n=B<this.read?this.read-B-1:this.end-B),0==n)))return this.bitb=
d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);a=e;b=this.left;b>r&&(b=r);b>n&&(b=n);H(c.next_in,g,window,B,b);g+=b;r-=b;B+=b;n-=b;if(0!=(this.left-=b))break;this.mode=0!=this.last?7:G;break;case 3:for(;14>k;){if(0!=r)a=e;else return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);r--;d|=(c.next_in[g++]&255)<<k;k+=8}this.table=b=d&16383;if(29<(b&31)||29<(b>>5&
31))return this.mode=9,c.msg="too many length or distance symbols",a=-3,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);b=258+(b&31)+(b>>5&31);if(null==this.blens||this.blens.length<b)this.blens=new Int32Array(b);else for(n=0;n<b;n++)this.blens[n]=0;d>>>=14;k-=14;this.index=0;mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>k;){if(0!=r)a=e;else return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,
c.next_in_index=g,this.write=B,this.inflate_flush(c,a);r--;d|=(c.next_in[g++]&255)<<k;k+=8}this.blens[s[this.index++]]=d&7;d>>>=3;k-=3}for(;19>this.index;)this.blens[s[this.index++]]=0;this.bb[0]=7;b=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,c);if(b!=e)return a=b,-3==a&&(this.blens=null,this.mode=9),this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,write=B,this.inflate_flush(c,a);this.index=0;this.mode=5;case 5:for(;;){b=this.table;if(!(this.index<
258+(b&31)+(b>>5&31)))break;for(b=this.bb[0];k<b;){if(0!=r)a=e;else return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);r--;d|=(c.next_in[g++]&255)<<k;k+=8}b=this.hufts[3*(this.tb[0]+(d&t[b]))+1];m=this.hufts[3*(this.tb[0]+(d&t[b]))+2];if(16>m)d>>>=b,k-=b,this.blens[this.index++]=m;else{n=18==m?7:m-14;for(p=18==m?11:3;k<b+n;){if(0!=r)a=e;else return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=
g,this.write=B,this.inflate_flush(c,a);r--;d|=(c.next_in[g++]&255)<<k;k+=8}d>>>=b;k-=b;p+=d&t[n];d>>>=n;k-=n;n=this.index;b=this.table;if(n+p>258+(b&31)+(b>>5&31)||16==m&&1>n)return this.blens=null,this.mode=9,c.msg="invalid bit length repeat",a=-3,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);m=16==m?this.blens[n-1]:0;do this.blens[n++]=m;while(0!=--p);this.index=n}}this.tb[0]=-1;p=new Int32Array(1);m=new Int32Array(1);u=
new Int32Array(1);x=new Int32Array(1);p[0]=9;m[0]=6;b=this.table;b=this.inftree.inflate_trees_dynamic(257+(b&31),1+(b>>5&31),this.blens,p,m,u,x,this.hufts,c);if(b!=e)return-3==b&&(this.blens=null,this.mode=13),a=b,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);this.codes.init(p[0],m[0],this.hufts,u[0],this.hufts,x[0],c);this.mode=6;case 6:this.bitb=d;this.bitk=k;c.avail_in=r;c.total_in+=g-c.next_in_index;c.next_in_index=g;
this.write=B;if((a=this.codes.proc(this,c,a))!=f)return this.inflate_flush(c,a);a=e;this.codes.free(c);g=c.next_in_index;r=c.avail_in;d=this.bitb;k=this.bitk;B=this.write;n=B<this.read?this.read-B-1:this.end-B;if(0==this.last){this.mode=G;break}this.mode=7;case 7:this.write=B;a=this.inflate_flush(c,a);B=this.write;if(this.read!=this.write)return this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);mode=12;case 8:return a=f,this.bitb=
d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);case 9:return a=-3,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a);default:return a=-2,this.bitb=d,this.bitk=k,c.avail_in=r,c.total_in+=g-c.next_in_index,c.next_in_index=g,this.write=B,this.inflate_flush(c,a)}};C.prototype.free=function(c){this.reset(c,null);this.hufts=this.window=null};C.prototype.set_dictionary=
function(c,a,b){H(c,a,window,0,b);this.read=this.write=b};C.prototype.sync_point=function(){return 1==this.mode};C.prototype.inflate_flush=function(c,a){var b,d,f;d=c.next_out_index;f=this.read;b=(f<=this.write?this.write:this.end)-f;b>c.avail_out&&(b=c.avail_out);0!=b&&a==p&&(a=e);c.avail_out-=b;c.total_out+=b;null!=this.checkfn&&(c.adler=this.check=c._adler.adler32(this.check,this.window,f,b));H(this.window,f,c.next_out,d,b);d+=b;f+=b;f==this.end&&(f=0,this.write==this.end&&(this.write=0),b=this.write-
f,b>c.avail_out&&(b=c.avail_out),0!=b&&a==p&&(a=e),c.avail_out-=b,c.total_out+=b,null!=this.checkfn&&(c.adler=this.check=c._adler.adler32(this.check,this.window,f,b)),H(this.window,f,c.next_out,d,b),d+=b,f+=b);c.next_out_index=d;this.read=f;return a};y.prototype.init=function(c,a,b,e,d,f,g){this.mode=0;this.lbits=c;this.dbits=a;this.ltree=b;this.ltree_index=e;this.dtree=d;this.dtree_index=f;this.tree=null};y.prototype.proc=function(c,a,b){var d,k,g=0,r=0,n=0,p,m,s,n=a.next_in_index;p=a.avail_in;g=
c.bitb;r=c.bitk;m=c.write;for(s=m<c.read?c.read-m-1:c.end-m;;)switch(this.mode){case 0:if(258<=s&&10<=p&&(c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,b=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,c,a),n=a.next_in_index,p=a.avail_in,g=c.bitb,r=c.bitk,m=c.write,s=m<c.read?c.read-m-1:c.end-m,b!=e)){this.mode=b==f?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=
1;case 1:for(d=this.need;r<d;){if(0!=p)b=e;else return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);p--;g|=(a.next_in[n++]&255)<<r;r+=8}d=3*(this.tree_index+(g&t[d]));g>>>=this.tree[d+1];r-=this.tree[d+1];k=this.tree[d];if(0==k){this.lit=this.tree[d+2];this.mode=6;break}if(0!=(k&16)){this.get=k&15;this.len=this.tree[d+2];this.mode=2;break}if(0==(k&64)){this.need=k;this.tree_index=d/3+this.tree[d+2];break}if(0!=(k&32)){this.mode=7;break}this.mode=
9;a.msg="invalid literal/length code";b=-3;c.bitb=g;c.bitk=r;a.avail_in=p;a.total_in+=n-a.next_in_index;a.next_in_index=n;c.write=m;return c.inflate_flush(a,b);case 2:for(d=this.get;r<d;){if(0!=p)b=e;else return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);p--;g|=(a.next_in[n++]&255)<<r;r+=8}this.len+=g&t[d];g>>=d;r-=d;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(d=this.need;r<d;){if(0!=
p)b=e;else return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);p--;g|=(a.next_in[n++]&255)<<r;r+=8}d=3*(this.tree_index+(g&t[d]));g>>=this.tree[d+1];r-=this.tree[d+1];k=this.tree[d];if(0!=(k&16)){this.get=k&15;this.dist=this.tree[d+2];this.mode=4;break}if(0==(k&64)){this.need=k;this.tree_index=d/3+this.tree[d+2];break}this.mode=9;a.msg="invalid distance code";b=-3;c.bitb=g;c.bitk=r;a.avail_in=p;a.total_in+=n-a.next_in_index;a.next_in_index=
n;c.write=m;return c.inflate_flush(a,b);case 4:for(d=this.get;r<d;){if(0!=p)b=e;else return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);p--;g|=(a.next_in[n++]&255)<<r;r+=8}this.dist+=g&t[d];g>>=d;r-=d;this.mode=5;case 5:for(d=m-this.dist;0>d;)d+=c.end;for(;0!=this.len;){if(0==s&&(m==c.end&&0!=c.read&&(m=0,s=m<c.read?c.read-m-1:c.end-m),0==s&&(c.write=m,b=c.inflate_flush(a,b),m=c.write,s=m<c.read?c.read-m-1:c.end-m,m==c.end&&0!=c.read&&
(m=0,s=m<c.read?c.read-m-1:c.end-m),0==s)))return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);c.window[m++]=c.window[d++];s--;d==c.end&&(d=0);this.len--}this.mode=0;break;case 6:if(0==s&&(m==c.end&&0!=c.read&&(m=0,s=m<c.read?c.read-m-1:c.end-m),0==s&&(c.write=m,b=c.inflate_flush(a,b),m=c.write,s=m<c.read?c.read-m-1:c.end-m,m==c.end&&0!=c.read&&(m=0,s=m<c.read?c.read-m-1:c.end-m),0==s)))return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=
n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);b=e;c.window[m++]=this.lit;s--;this.mode=0;break;case 7:7<r&&(r-=8,p++,n--);c.write=m;b=c.inflate_flush(a,b);m=c.write;if(c.read!=c.write)return c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);this.mode=8;case 8:return b=f,c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);case 9:return b=-3,c.bitb=g,c.bitk=r,a.avail_in=
p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b);default:return b=-2,c.bitb=g,c.bitk=r,a.avail_in=p,a.total_in+=n-a.next_in_index,a.next_in_index=n,c.write=m,c.inflate_flush(a,b)}};y.prototype.free=function(a){};y.prototype.inflate_fast=function(a,b,d,g,k,n,r,m){var p,s,u,w,x,y,A,z,C,D,v,E;y=m.next_in_index;A=m.avail_in;w=r.bitb;x=r.bitk;z=r.write;C=z<r.read?r.read-z-1:r.end-z;a=t[a];D=t[b];do{for(;20>x;)A--,w|=(m.next_in[y++]&255)<<x,x+=8;p=w&a;s=d;u=g;E=3*(u+p);if(0==
(b=s[E]))w>>=s[E+1],x-=s[E+1],r.window[z++]=s[E+2],C--;else{do{w>>=s[E+1];x-=s[E+1];if(0!=(b&16)){b&=15;v=s[E+2]+(w&t[b]);w>>=b;for(x-=b;15>x;)A--,w|=(m.next_in[y++]&255)<<x,x+=8;p=w&D;s=k;u=n;E=3*(u+p);b=s[E];do if(w>>=s[E+1],x-=s[E+1],0!=(b&16)){for(b&=15;x<b;)A--,w|=(m.next_in[y++]&255)<<x,x+=8;p=s[E+2]+(w&t[b]);w>>=b;x-=b;C-=v;if(z>=p)p=z-p,r.window[z++]=r.window[p++],r.window[z++]=r.window[p++],v-=2;else{p=z-p;do p+=r.end;while(0>p);b=r.end-p;if(v>b){v-=b;if(0<z-p&&b>z-p){do r.window[z++]=r.window[p++];
while(0!=--b)}else H(r.window,p,r.window,z,b),z+=b;p=0}}do r.window[z++]=r.window[p++];while(0!=--v);break}else if(0==(b&64))p+=s[E+2],p+=w&t[b],E=3*(u+p),b=s[E];else return m.msg="invalid distance code",v=m.avail_in-A,v=x>>3<v?x>>3:v,A+=v,y-=v,x-=v<<3,r.bitb=w,r.bitk=x,m.avail_in=A,m.total_in+=y-m.next_in_index,m.next_in_index=y,r.write=z,-3;while(1);break}if(0==(b&64)){if(p+=s[E+2],p+=w&t[b],E=3*(u+p),0==(b=s[E])){w>>=s[E+1];x-=s[E+1];r.window[z++]=s[E+2];C--;break}}else{if(0!=(b&32))return v=m.avail_in-
A,v=x>>3<v?x>>3:v,A+=v,y-=v,x-=v<<3,r.bitb=w,r.bitk=x,m.avail_in=A,m.total_in+=y-m.next_in_index,m.next_in_index=y,r.write=z,f;m.msg="invalid literal/length code";v=m.avail_in-A;v=x>>3<v?x>>3:v;A+=v;y-=v;x-=v<<3;r.bitb=w;r.bitk=x;m.avail_in=A;m.total_in+=y-m.next_in_index;m.next_in_index=y;r.write=z;return-3}}while(1)}}while(258<=C&&10<=A);v=m.avail_in-A;v=x>>3<v?x>>3:v;y-=v;r.bitb=w;r.bitk=x-(v<<3);m.avail_in=A+v;m.total_in+=y-m.next_in_index;m.next_in_index=y;r.write=z;return e};D.prototype.huft_build=
function(b,d,f,g,k,m,n,s,t,u,w){var y,x,v,A,z,C,D,E,G;C=0;x=f;do this.c[b[d+C]]++,C++,x--;while(0!=x);if(this.c[0]==f)return n[0]=-1,s[0]=0,e;z=s[0];for(v=1;15>=v&&0==this.c[v];v++);A=v;z<v&&(z=v);for(x=15;0!=x&&0==this.c[x];x--);u=x;z>x&&(z=x);s[0]=z;for(s=1<<v;v<x;v++,s<<=1)if(0>(s-=this.c[v]))return-3;if(0>(s-=this.c[x]))return-3;this.c[x]+=s;this.x[1]=v=0;C=1;for(D=2;0!=--x;)this.x[D]=v+=this.c[C],D++,C++;C=x=0;do 0!=(v=b[d+C])&&(this.v[this.x[v]++]=x),C++;while(++x<f);f=this.x[u];C=this.x[0]=
x=0;d=-1;E=-z;for(G=D=this.u[0]=0;A<=u;A++)for(b=this.c[A];0!=b--;){for(;A>E+z;){d++;E+=z;G=u-E;G=G>z?z:G;if((y=1<<(v=A-E))>b+1&&(y-=b+1,D=A,v<G))for(;++v<G&&!((y<<=1)<=this.c[++D]);)y-=this.c[D];G=1<<v;if(this.hn[0]+G>a)return-3;this.u[d]=D=this.hn[0];this.hn[0]+=G;0!=d?(this.x[d]=x,this.r[0]=v,this.r[1]=z,v=x>>>E-z,this.r[2]=D-this.u[d-1]-v,H(this.r,0,t,3*(this.u[d-1]+v),3)):n[0]=D}this.r[1]=A-E;C>=f?this.r[0]=192:w[C]<g?(this.r[0]=256>this.v[C]?0:96,this.r[2]=this.v[C++]):(this.r[0]=m[this.v[C]-
g]+16+64,this.r[2]=k[this.v[C++]-g]);y=1<<A-E;for(v=x>>>E;v<G;v+=y)H(this.r,0,t,3*(D+v),3);for(v=1<<A-1;0!=(x&v);v>>>=1)x^=v;x^=v;for(v=(1<<E)-1;(x&v)!=this.x[d];)d--,E-=z,v=(1<<E)-1}return 0!=s&&1!=u?p:e};D.prototype.inflate_trees_bits=function(a,b,e,d,f){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,e,b,d,this.hn,this.v);if(-3==a)f.msg="oversubscribed dynamic bit lengths tree";else if(a==p||0==b[0])f.msg="incomplete dynamic bit lengths tree",a=-3;return a};D.prototype.inflate_trees_dynamic=
function(a,b,d,f,g,m,n,s,t){this.initWorkArea(288);this.hn[0]=0;m=this.huft_build(d,0,a,257,M,A,m,f,s,this.hn,this.v);if(m!=e||0==f[0])return-3==m?t.msg="oversubscribed literal/length tree":-4!=m&&(t.msg="incomplete literal/length tree",m=-3),m;this.initWorkArea(288);m=this.huft_build(d,a,b,0,K,w,n,g,s,this.hn,this.v);return m!=e||0==g[0]&&257<a?(-3==m?t.msg="oversubscribed distance tree":m==p?(t.msg="incomplete distance tree",m=-3):-4!=m&&(t.msg="empty distance tree with lengths",m=-3),m):e};D.prototype.initWorkArea=
function(a){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(a),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16));this.v.length<a&&(this.v=new Int32Array(a));for(var b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;H(this.c,0,this.u,0,15);H(this.c,0,this.x,0,16)};var g="function"===typeof(new Uint8Array(1)).subarray;"undefined"!==typeof z&&(z.exports={inflateBuffer:E,arrayCopy:H})},{}]},{},[7]);
